version: 2
updates:

  # ───────────────────────────────────────────────
  # 1. Python Dependencies (One Ecosystem Block)
  #    • Groups handle separation of concerns
  # ───────────────────────────────────────────────
  - package-ecosystem: "pip"
    directory: "/"
    schedule:
      interval: "weekly"

    commit-message:
      prefix: "deps"
      include: "scope"

    labels:
      - "dependency-update"
      - "sswg-core"

    # Grouping is how we do “multiple update tracks”
    groups:

      sswg-core:
        patterns:
          - "jsonschema*"
          - "pydantic*"
          - "graphviz*"
          - "rich*"
          - "anyio*"
          - "deepdiff*"
          - "ai-*"
          - "sswg-*"

      dev-tooling:
        patterns:
          - "pytest*"
          - "pytest-*"
          - "mypy*"
          - "ruff*"
          - "black*"
          - "isort*"

      security-critical:
        patterns:
          - "*"   # broad match
        update-types:
          - "security"
        # These receive the “security” prefix automatically
        # and are allowed to open more PRs even if others are pending
        open-pull-requests-limit: 5

  # ───────────────────────────────────────────────
  # 2. GitHub Actions Dependencies
  # ───────────────────────────────────────────────
  - package-ecosystem: "github-actions"
    directory: "/"
    schedule:
      interval: "weekly"

    commit-message:
      prefix: "ci"
      include: "scope"

    labels:
      - "ci"
      - "dependency-update"

    groups:
      core-ci-actions:
        patterns:
          - "actions/*"
          - "peter-evans/*"
