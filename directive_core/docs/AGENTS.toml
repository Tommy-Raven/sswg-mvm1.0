# ============================================================
# AGENTS — CANONICAL AGENT GOVERNANCE (AUTHORITATIVE)
# ============================================================

[anchor]
anchor_id = "sswg_agents"
anchor_model = "sswg+mvm+version"
anchor_version = "1.0.0"
scope = "directive_core/docs"
status = "invariant"
output_mode = "non_operational_output"

owner = [
  "2025© Raven Recordings",
  "Tommy Raven (Thomas Byers)"
]

init_purpose = "Define canonical agent governance for directive_core."
init_authors = ["Tommy Raven"]

# ------------------------------------------------------------
# SECTION 1 — CANONICAL HEADER CONSTRAINTS
# ------------------------------------------------------------

[canonical_header]

required = true
first_fence_must_be_toml = true
mixed_headers_forbidden = true
duplicate_anchors_forbidden = true
yaml_fences_forbidden = true

description = """
Every governance document MUST begin with a TOML canonical ledger header.
No YAML, mixed formats, or duplicate anchors are permitted.
"""

# ------------------------------------------------------------
# SECTION 2 — ROOT-SCOPE AGENT RULES (INVARIANT)
# ------------------------------------------------------------

[agents.scope]

applies_to = [
  "human_contributors",
  "automation",
  "validators",
  "ci_systems",
  "delegated_execution_environments"
]

waivable = false

_These rules apply to all agents, including human contributors, automation, validators, CI systems, and any delegated execution environment._

# --- BEGIN NEW INVARIANT: NON-DESTRUCTIVE ACTIONS ONLY --- #

[agent_action_constraints]

# Absolute prohibitions — non-waivable
prohibit_file_deletion = true
prohibit_file_renaming = true
prohibit_destructive_editing = true
prohibit_subtractive_editing = true

# Definitions (normative)
destructive_editing_definition = """
Any edit that removes, truncates, overwrites, or alters existing authoritative
content such that information, intent, or governance meaning is lost.
"""

subtractive_editing_definition = """
Any edit whose net effect is removal or reduction of existing content,
including deletion of sections, lines, clauses, files, or anchors.
"""

allow_additive_editing_only = true

additive_editing_definition = """
Edits that strictly add new content without removing, renaming, relocating,
or weakening existing content. Additions MUST preserve all prior meaning,
authority, and auditability.
"""

# Enforcement semantics
violation_behavior = [
  "fail_closed",
  "reject_action",
  "emit_security_violation",
  "quarantine_attempt"
]

# No exceptions
exceptions_permitted = false
waivers_permitted = false
discretionary_override_permitted = false

# ------------------------------------------------------------
# SECTION 3 — SEMANTIC AMBIGUITY PROHIBITION (INVARIANT)
# ------------------------------------------------------------

[agents.semantic_ambiguity]

classification = "security_vulnerability"
treat_as_style_issue = false
assume_malicious_potential = true

agents_must_not = [
  "introduce_ambiguity",
  "accept_ambiguity",
  "normalize_ambiguity",
  "interpret_ambiguity",
  "propagate_ambiguity"
]

public_error_label = "Semantic Ambiguity"

# ------------------------------------------------------------
# SECTION 4 — ABSOLUTELY FORBIDDEN LANGUAGE
# ------------------------------------------------------------

[agents.forbidden_language]

conditional_permission_phrases = [
  "allowed unless",
  "permitted unless",
  "unless explicitly waived",
  "allowed with approval",
  "may be allowed",
  "generally allowed",
  "except in special cases",
  "at discretion",
  "subject to interpretation"
]

context_ignored = true
intent_ignored = true
harmlessness_ignored = true

# ------------------------------------------------------------
# SECTION 5 — ABSOLUTE LANGUAGE REQUIREMENTS
# ------------------------------------------------------------

[agents.required_language]

allowed_modals = [
  "MUST",
  "MUST NOT",
  "SHALL",
  "SHALL NOT"
]

disallowed_modals = [
  "may",
  "might",
  "should",
  "could",
  "generally",
  "typically"
]

# ------------------------------------------------------------
# SECTION 6 — EXCEPTION HANDLING (EXPLICIT ONLY)
# ------------------------------------------------------------

[agents.exceptions]

inline_exceptions_forbidden = true
conditional_language_forbidden = true

exceptions_must = [
  "exist_as_separate_contract",
  "have_own_schema",
  "have_own_validator",
  "be_opt_in_by_construction",
  "be_auditable",
  "be_revocable",
  "be_scope_bounded"
]

# ------------------------------------------------------------
# SECTION 7 — MANDATORY AMBIGUITY GATE
# ------------------------------------------------------------

[agents.ambiguity_gate]

required = true
executes_before_schema_validation = true
fail_closed = true

user_visible_output = [
  "Semantic Ambiguity"
]

must_not_expose = [
  "rule_identifiers",
  "pattern_names",
  "remediation_hints"
]

# ------------------------------------------------------------
# SECTION 8 — FAILURE SEMANTICS
# ------------------------------------------------------------

[agents.failure_semantics]

on_ambiguity = [
  "fail_closed",
  "quarantine_artifact",
  "halt_processing",
  "skip_normalization",
  "skip_enforcement",
  "skip_execution"
]

guidance_forbidden = true

# ------------------------------------------------------------
# SECTION 9 — INTERPRETATION PROHIBITION
# ------------------------------------------------------------

[agents.interpretation]

clarification_allowed = false
reinterpretation_allowed = false
resolution_allowed = false

ambiguity_results_in = "rejection_only"

# ------------------------------------------------------------
# END OF AGENTS
# ------------------------------------------------------------

_These rules are non-waivable._
