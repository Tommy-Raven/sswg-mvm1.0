[anchor]
anchor_id = "architecture"
anchor_model = "sswg+mvm+version"
anchor_version = "1.0.1"
scope = "directive_core/docs"
status = "invariant"
output_mode = "non_operational_output"

owner = [
  "2025Â© Raven Recordings",
  "Tommy Raven (Thomas Byers)"
]

init_purpose = "Define the canonical system architecture and its enforced properties."
init_authors = ["Tommy Raven"]


[intent]

deterministic_artifact_generation = true
invariant_preservation = true
bounded_recursion = true
non_operational_outputs_only = true

system_is_conversational = false
system_emits_procedures = false
system_interprets_intent = false


[constitutional_dependencies]

consumes_authority_from = [
  "TERMINOLOGY.toml",
  "AGENTS.toml",
  "SSWG_CONSTITUTION.toml",
  "FORMAT_BOUNDARY_CONTRACT.toml"
]

ingestion_order_position = 5
out_of_order_invalidates = true


[format_boundary]

authoritative_format = "toml"
markdown_authoritative = false
yaml_authoritative = false

machine_consumes_authority_from = [
  "toml_only"
]

format_boundary_contract = "FORMAT_BOUNDARY_CONTRACT.toml"


[semantic_ambiguity_alignment]

ambiguity_treated_as = "security_vulnerability"
ambiguity_gate_required = true
ambiguity_gate_executes_before = [
  "normalization",
  "schema_validation",
  "architecture_enforcement"
]

ambiguity_failure_behavior = [
  "fail_closed",
  "reject_artifact",
  "quarantine_artifact"
]


[layers]

artifact_generation_core = "produces_schema_aligned_artifacts"
validation_and_invariants = "enforces_non_negotiable_constraints"
bounded_recursion_engine = "permits_controlled_refinement"
evaluation_and_gating = "determines_admissibility"
lineage_and_evidence = "records_traceability"

all_layers_fail_closed = true
all_layers_emit_evidence = true


[components]

generator = "artifact_generation_orchestration"
ai_validation = "schema_and_invariant_enforcement"
ai_graph = "dependency_graph_construction"
ai_recursive = "bounded_recursion_engine"
ai_evaluation = "deterministic_quality_metrics"
ai_memory = "lineage_and_version_tracking"
ai_visualization = "non_operational_exporters"
ai_monitoring = "telemetry_and_logging"
schemas = "canonical_json_contracts"


[artifact_generation]

phase_ordering_enforced = true
template_resolution_deterministic = true
outputs_immutable = true
lineage_recorded = true


[validation]

json_schema_required = true
root_contract_required = true
invariants_mandatory = true

violation_behavior = "fail_closed_rejection"
decision_trace_recorded = true


[recursion]

explicit_termination_conditions = true
depth_limited = true
cost_limited = true
implicit_self_expansion_forbidden = true

each_cycle_emits = [
  "candidate_artifact",
  "evaluation_result",
  "accept_or_reject_decision",
  "audit_record"
]


[evaluation]

metrics_deterministic = true
comparison_diff_based = true
acceptance_criteria_explicit = true

optimization_without_constraints_forbidden = true


[reference_loop]

part_of_pdl_pipeline = false
promotion_gating = true

emits_evidence = [
  "benchmark_evolution_summary",
  "entropy_budget_verification",
  "convergence_summary",
  "final_output_snapshot"
]


[lineage]

parent_child_relationships_recorded = true
hashes_recorded = true
timestamps_recorded = true
decision_traces_recorded = true
audit_bundles_supported = true


[visualization]

outputs_executable = false
outputs_descriptive_only = true
authority_conveyed = false


[failure_handling]

fail_closed = true

failure_causes = [
  "semantic_ambiguity_detected",
  "schema_validation_failure",
  "invariant_violation",
  "recursion_limit_exceeded",
  "evaluation_gate_rejection"
]

failure_emits_artifacts = true


[extensions]

may_add = [
  "artifact_templates",
  "evaluation_metrics",
  "visualization_formats"
]

must_not = [
  "weaken_invariants",
  "bypass_validation",
  "emit_operational_outputs",
  "introduce_ambiguity"
]


[guarantees]

determinism = true
bounded_recursion = true
complete_lineage = true
auditability = true

formal_guarantees_reference = "FORMAL_GUARANTEES.toml"


[non_goals]

operational_instructions = false
autonomous_action = false
intent_inference = false
trust_based_authority = false

